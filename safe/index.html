<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JS Rect</title>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="../images/icons/icon-192x192.png">
  <meta name="theme-color" content="#b25a7c">
  <meta name="apple-mobile-web-app-status-bar-style" content="#b25a7c">
  <style>
    :root {
      --body-bg: #b25a7c;
      --body-color: #fff;
    }

    html {
      font-size: .254237288vw; /* Set base font-size for rem calculations. */
    }

    @media (min-width: 768px) {
      html {
        font-size: 1.37288px;
      }
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background-color: var(--body-bg);
    }

    body, .safe {
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
    }

    .safe {
      padding-top: 11.6543325rem;
    }

    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    .rectangle {
      width: 100vw;
      background-color: red; /* Set rectangle to black for high contrast. */
    }

    form {
      display: flex;
      gap: 2.91358312rem;
      flex-wrap: wrap;
      width: 100%;
      justify-content: center;
    }

    select,
    input[type="number"],
    button {
      padding: 4.37037469rem 8.74074937rem;
      font-family: inherit;
      font-size: 11.6543325rem;
      line-height: 1.5;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      border-width: 1px;
      border-style: solid;
      border-radius: 4.37037469rem;
    }

    select,
    input[type="number"] {
      display: block;
      width: 100%;
      color: var(--body-color);
      border-color: var(--body-color);
      background-color: var(--body-bg);
      transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    }

    select:focus,
    input[type="number"]:focus {
      outline: 0;
    }

    input[type="number"] {
      pointer-events: none; /* Make the input field uneditable. */
      background-clip: padding-box;
      max-width: 48.1105413rem;
    }

    select {
      padding-right: 26.2222481rem;
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-position: right 8.74074937rem center;
      background-size: 11.6543325rem 8.74074937rem;
      max-width: 60.3111707rem;
    }

    button {
      display: inline-block;
      color: var(--body-bg);
      text-align: center;
      vertical-align: middle;
      cursor: pointer;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      border-color: var(--body-color);
      background-color: var(--body-color);
      transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    .fab {
      width: 56rem;
      height: 56rem;
      background-color: white;
      border-radius: 0;
      border-color: white;
      position: absolute;
      bottom: 24rem;
      right: 36rem;
      border-radius: 50%;;
    }

    .fab svg {
      width: 24rem;
      height: 24rem;
      vertical-align: middle;
    }
  </style>
</head>
<body>

<div class="safe">
  <form id="controlForm">
    <label class="visually-hidden" for="unitSelect">Select Unit:</label>
    <select id="unitSelect">
      <option value="px">Px</option>
      <option value="vh">Vh</option>
      <option value="vw">Vw</option>
      <option value="rem">Rem</option>
    </select>

    <label class="visually-hidden" for="heightInput">Height:</label>
    <input type="number" id="heightInput" value="56" readonly />

    <button type="button" id="ui">ui</button>
    <button type="button" id="di">di</button>
    <button type="button" id="ud">ud</button>
    <button type="button" id="dd">dd</button>
  </form>

  <button type="submit" class="fab">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="ji ji-arrow-right" viewBox="0 0 16 16">
      <path d="M8.25.25a1 1 0 0 0-.708.293 1 1 0 0 0 0 1.416l5.041 5.042H1a1 1 0 0 0 0 2h11.583l-5.04 5.042a1 1 0 0 0 0 1.414 1 1 0 0 0 1.413 0l6.75-6.749a1 1 0 0 0 0-1.416L8.956.543A1 1 0 0 0 8.25.25"/>
    </svg>
    <span class="visually-hidden">Next</span>
  </button>

  <div id="rectangle" class="rectangle"></div>
</div>

<script>
  const unitSelect = document.getElementById('unitSelect');
  const heightInput = document.getElementById('heightInput');
  const rectangle = document.getElementById('rectangle');
  const buttons = {
    ui: document.getElementById('ui'),
    di: document.getElementById('di'),
    ud: document.getElementById('ud'),
    dd: document.getElementById('dd')
  };

  // Detect platform based on user agent
  let platform;
  if (/android/i.test(navigator.userAgent)) {
    platform = 'android';
  } else if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
    platform = 'ios';
  } else {
    platform = 'unknown';
  }

  // Object to store user-defined values for each platform and unit.
  const unitValues = {
    ios: {
      px: 0, //108.2,
      vh: 0, //14,
      vw: 0, //27.6,
      rem: 0 //108.3
    },
    android: {
      px: 0, //6.3,
      vh: 0, //.5,
      vw: 0, //3.1,
      rem: 0 //1.2
    },
    unknown: {
      px: 0, //50, // Default values for unknown platforms
      vh: 0, //10,
      vw: 0, //10,
      rem: 0 //50,
    }
  };

  // Function to update the rectangle height based on user input.
  function updateRectangleHeight() {
    const selectedUnit = unitSelect.value;
    const heightValue = heightInput.value;
    rectangle.style.height = `${heightValue}${selectedUnit}`;
  }

  // Function to set default or user-defined value based on the detected platform.
  function setDefaultHeight() {
    const selectedUnit = unitSelect.value;
    heightInput.value = unitValues[platform][selectedUnit];
    updateRectangleHeight();
  }

  // Update stored values when buttons are clicked, keeping decimals.
  buttons.ui.addEventListener('click', () => {
    heightInput.value = (parseFloat(heightInput.value) + 1).toFixed(1);
    unitValues[platform][unitSelect.value] = parseFloat(heightInput.value);
    updateRectangleHeight();
  });

  buttons.di.addEventListener('click', () => {
    heightInput.value = (parseFloat(heightInput.value) - 1).toFixed(1);
    unitValues[platform][unitSelect.value] = parseFloat(heightInput.value);
    updateRectangleHeight();
  });

  buttons.ud.addEventListener('click', () => {
    heightInput.value = (parseFloat(heightInput.value) + 0.1).toFixed(1);
    unitValues[platform][unitSelect.value] = parseFloat(heightInput.value);
    updateRectangleHeight();
  });

  buttons.dd.addEventListener('click', () => {
    heightInput.value = (parseFloat(heightInput.value) - 0.1).toFixed(1);
    unitValues[platform][unitSelect.value] = parseFloat(heightInput.value);
    updateRectangleHeight();
  });

  // Update the height when the unit changes.
  unitSelect.addEventListener('change', setDefaultHeight);

  // Set initial height.
  setDefaultHeight();
</script>

</body>
</html>
